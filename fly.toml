# Fly.io configuration template
# Run 'flyctl launch' to customize this for your app

app = "YOUR_APP_NAME"  # Replace with your app name
primary_region = "iad"  # Change to your preferred region (iad=US East)

[build]
  # Uncomment the appropriate builder for your app type:

  # For Node.js apps:
  # builder = "heroku/buildpacks:20"

  # For Python apps:
  # builder = "paketobuildpacks/builder:base"

  # For Docker-based apps:
  # dockerfile = "Dockerfile"

[env]
  # Non-secret environment variables
  NODE_ENV = "production"
  PORT = "8080"

[http_service]
  internal_port = 8080
  force_https = true
  auto_stop_machines = true
  auto_start_machines = true
  min_machines_running = 0  # Scale to zero when idle (cost-saving)

  # Health check configuration
  [http_service.checks]
    [http_service.checks.alive]
      type = "http"
      method = "GET"
      path = "/health"  # Adjust to your health check endpoint
      interval = "15s"
      timeout = "2s"
      grace_period = "5s"

[[vm]]
  cpu_kind = "shared"
  cpus = 1
  memory_mb = 256  # Start small, scale up if needed

# Uncomment if you need a database
# [[services]]
#   internal_port = 5432
#   protocol = "tcp"
